# 题目详情页实现说明

## 概述
基于接口文档成功设计并实现了完整的题目详情页面，包含题目信息展示、容器管理、拓扑图可视化、答案提交和记录查看等核心功能。

## 实现的功能

### 1. 核心API接口
- **Docker管理API** (`src/api/docker.ts`)
  - 容器启动: `startContainer()`
  - 容器信息获取: `getContainerInfo()`
  - 容器刷新: `refreshContainer()`
  - 容器停止: `stopContainer()`
  - 管理员容器列表: `getContainerList()`

- **提交记录API** (`src/api/record.ts`)
  - Flag提交: `submitFlag()`
  - 用户记录查询: `getUserRecords()`
  - 题目记录查询: `getQuestionRecords()`
  - 排行榜查询: `getRankings()`

### 2. 题目详情页 (`src/views/question/QuestionDetailView.vue`)

#### 主要功能模块：
1. **题目信息展示**
   - 标题、介绍、难度星级
   - 统计数据（尝试人数、解题人数、解题率）
   - 创建时间、有效时间等元信息

2. **网络拓扑图**
   - 集成自定义拓扑图组件
   - 支持JSON配置的可视化渲染
   - 交互式控制（缩放、重置）

3. **容器环境管理**
   - 容器状态实时监控
   - 一键创建、刷新、停止容器
   - 倒计时显示和超时处理
   - 访问地址快速连接

4. **Flag提交系统**
   - 答案输入验证
   - 提交结果反馈
   - 排名显示

5. **提交记录查看**
   - 历史提交记录列表
   - 正确/错误状态标识
   - 提交时间和排名信息

#### 技术特性：
- **响应式设计**: 支持桌面端和移动端
- **实时更新**: 容器状态和倒计时自动刷新
- **错误处理**: 完善的异常情况处理
- **用户体验**: Loading状态、确认对话框等

### 3. 拓扑图组件 (`src/components/common/TopologyViewer.vue`)

#### 功能特点：
- 基于SVG的轻量级实现
- 支持节点、连接线的可视化
- 交互控制（放大、缩小、重置）
- 标签显示控制
- 错误处理和空状态显示

#### 数据格式支持：
```typescript
interface TopologyData {
  title?: string;
  nodes?: TopologyNode[];
  clusters?: any[];
  connections?: TopologyEdge[];
  direction?: string;
}
```

### 4. 路由配置
- 题目详情页路由: `/home/questions/:id`
- 测试页面路由: `/home/test/detail`
- 修正了题目列表页的跳转链接

### 5. 测试支持
- **测试数据** (`src/utils/test-data.ts`): 包含模拟的题目、容器、记录数据
- **测试页面** (`src/views/test/TestDetailView.vue`): 功能验证和演示页面

## 接口文档对应关系

### 题目接口 (题目接口.md)
- ✅ `GET /question/{question_id}` - 获取题目详情
- ✅ 题目数据结构完全对应
- ✅ 错误处理 (404, 403)

### Docker接口 (docker接口.md)
- ✅ `POST /docker/container` - 启动容器
- ✅ `GET /docker/container/{container_id}` - 获取容器信息
- ✅ `PUT /docker/container/{container_id}` - 刷新容器
- ✅ `DELETE /docker/container/{container_id}` - 停止容器
- ✅ 容器状态枚举和类型完全对应

### 技术实现 (技术实现.md)
- ✅ 数据库表结构对应
- ✅ 容器生命周期管理
- ✅ 提交记录系统
- ✅ 分值和排名逻辑

## 使用方式

### 开发环境访问
1. 启动前端开发服务器
2. 访问 `/home/test/detail` 查看功能演示
3. 访问 `/home/questions/1` 测试具体题目页面

### 生产环境部署
1. 确保后端API服务正常运行
2. 配置正确的API基础路径
3. 题目数据包含有效的拓扑图配置

## 技术栈
- **前端框架**: Vue 3 + TypeScript
- **UI组件库**: Element Plus
- **路由管理**: Vue Router
- **状态管理**: Pinia
- **HTTP客户端**: Axios
- **图形渲染**: 原生SVG

## 扩展建议

### 短期优化
1. 集成专业的网络拓扑图库 (如 vis.js, cytoscape.js)
2. 添加容器日志查看功能
3. 实现题目收藏和标签过滤

### 长期规划
1. 支持多种容器类型和部署方式
2. 实现协作答题和团队功能
3. 集成代码编辑器和终端模拟器
4. 添加题目评论和讨论功能

## 总结
成功实现了功能完整、用户体验良好的题目详情页面，完全符合接口文档规范，为CTF平台提供了核心的答题环境。代码结构清晰，可维护性强，具备良好的扩展性。